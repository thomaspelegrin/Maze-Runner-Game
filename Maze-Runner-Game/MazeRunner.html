<!DOCTYPE html>
<html>
<head>
    <link rel="shortcut icon" href="#">
	<meta charset="UTF-8">
	<title>CS371 - Final Project</title>
	<!--   Begin GLSL 3.0 Shader code -->
	<script id="vertex-shader" type="x-shader/x-vertex">
        #version 300 es
        in vec3 a_normals;
        in vec4 a_coords;
        in vec2 a_texCoord;

        out vec4 v_color;
        out vec2 v_texCoord;

        uniform mat4 u_modelViewMatrix;
        uniform mat4 u_projectionMatrix;
        uniform vec4 ambientProduct, diffuseProduct, specularProduct,
                    ambientProduct2, diffuseProduct2, specularProduct2;
        uniform vec4 lightPosition, lightPosition2;
        uniform float shininess;

        void main() {
            vec4 ambientTotal;
            vec4 diffuseTotal;
            vec4 specularTotal;

            // Transform vertex position into eye coordinates
            vec3 pos = -(u_modelViewMatrix * a_coords).xyz;     // computes the eye position
            
            // Here the light is part of the model
            vec3 light = (u_modelViewMatrix * lightPosition).xyz;
            vec3 light2 = (u_modelViewMatrix * lightPosition2).xyz;

            // Normalized vector from pos to light
            // ----------------- first light source -------------------------//
            vec3 L = normalize( light - pos );
            
            // ----------------- second light source -------------------------//
            vec3 L2 = normalize( light2 - pos );
        

            // Next two lines compute halfway vector, which is unnecessary in diffuse.
            vec3 E = normalize( -pos );

            // ----------------- first light source -------------------------//
            vec3 H = normalize( L + E );
            // ----------------- second light source -------------------------//
            vec3 H2 = normalize( L2 + E );

            vec4 NN = vec4( a_normals, 0 );
            // Transform vertex normal into eye coordinates
            vec3 N = normalize( (u_modelViewMatrix*NN).xyz);

            // Note the above line is valid in this case, but not in general for modelview matrices used to transform the normals
            // If you have an arbitrary sequence of modeling transformations that you are constantly applying to the object,
            // then the normals of that object are transformed by Tranpose(Inverse(u_modelViewMatrix)), not u_modelViewMatrix
            // For just rotations around the origin (and perhaps some initial modeling applied once), this is the same as u_modelViewMatrix, so we stick with that here

            // Compute terms in the illumination equation
            vec4 ambient = ambientProduct + ambientProduct2;

            float Kd = max( dot( L, N ), 0.0 );
            float Kd2 = max( dot( L2, N ), 0.0 );
            vec4 diffuse = Kd*diffuseProduct + Kd2*diffuseProduct2;

            float Ks = pow( max( dot( N, H ), 0.0 ), shininess );
            float Ks2 = pow( max( dot( N, H2 ), 0.0 ), shininess );
            vec4 specular = Ks * specularProduct;
            vec4 specular2 = Ks2 * specularProduct2;
            
            if( dot( L, N ) < 0.0 ) {
                specular = vec4( 0.0, 0.0, 0.0, 1.0 );
            } else if ( dot(L2, N) < 0.0 ) {
                specular2 = vec4( 0.0, 0.0, 0.0, 1.0 );
            }
            gl_Position = u_projectionMatrix * u_modelViewMatrix * a_coords;      

            v_color = ambient + diffuse + (specular + specular2);
            v_color.a = 1.0;
            v_texCoord = a_texCoord;
        }    

	</script>

	<script id="fragment-shader" type="x-shader/x-fragment">
		#version 300 es
		precision mediump float;

        in vec4 v_color;
        in vec2 v_texCoord;

		out vec4 f_color;
        uniform sampler2D u_textureMap;

		void main() {
            f_color = v_color * texture(u_textureMap, v_texCoord);
		}
	</script>
	<!--   End GLSL 3.0 Shader code -->

	<!--   JS include files -->
    
    <!--By changing the JSON file, can view different objects-->

    <script type="text/javascript" src="models/knight_mesh.js"></script>
    <script type="text/javascript" src="models/shield_mesh.js"></script>
    <script type="text/javascript" src="models/shoe_mesh.js"></script>
    <script type="text/javascript" src="models/teapot.js"></script>
    <script type="text/javascript" src="models/person_mesh.js"></script>
    <script type="text/javascript" src="models/coin_mesh.js"></script>
    <script type="text/javascript" src="models/moneybag_mesh.js"></script>
    <script type="text/javascript" src="models/mystery_mesh.js"></script>
    <script type="text/javascript" src="models/mine_mesh.js"></script>
    <script type="text/javascript" src="models/mushroom_mesh.js"></script>
    <script type="text/javascript" src="models/lego_mesh.js"></script>



    <!--  teapot.js batwing.js vw-model.js  -->
    <script type="text/javascript" src="CS371utils.js"></script>
	<script type="text/javascript" src="MazeRunner.js"></script>
    <script type="text/javascript" src="shapes.js"></script>
    <script type="text/javascript" src="Utilities.js"></script>
    <script type="text/javascript" src="Model.js"></script>
    <script type="text/javascript" src="Mesh.js"></script>
    <script type="text/javascript" src="Shape.js"></script>
    <script type="text/javascript" src="Token.js"></script>
    <script type="text/javascript" src="Player.js"></script>
    <script type="text/javascript" src="PowerUp.js"></script>
    <script type="text/javascript" src="ShoePowerUp.js"></script>
    <script type="text/javascript" src="ShieldPowerUp.js"></script>
    <script type="text/javascript" src="MysteryPowerUp.js"></script>
    <script type="text/javascript" src="MoneyBagPowerUp.js"></script>
    <script type="text/javascript" src="Heap.js"></script>
    <script type="text/javascript" src="PriorityQueue.js"></script>
    <script type="text/javascript" src="ComputerPlayer.js"></script>
    <script type="text/javascript" src="Mine.js"></script>
</head>

<body style="background-color:black;"onload="init();">
	<h2 style="color:white">Maze Runner</h2>
	<canvas id="gl-canvas" style="float:left; margin-right: 5px;" width="600" height="600">>
		Oops ... your browser doesn't support the HTML5 canvas element
	</canvas>
    <div>
            <br>
            <button id = "zoomIn"; style="background-color:grey;">Zoom In</button>
            <button id = "zoomOut"; style="background-color:grey;">Zoom Out</button>
            <br>
            <br>
            <button id = "cameraLeft"; style="background-color:grey;">Camera Left</button>
            <button id = "cameraRight"; style="background-color:grey;">Camera Right</button>
            <br>
            <br>
            <button id = "cameraUp"; style="background-color:grey;">Camera Up</button>
            <button id = "cameraDown"; style="background-color:grey;">Camera Down</button>
            <br>
            <br>     
            <button id = "Start"; style="background-color:grey;">Start game</button>
            <button id = "NewGame"; style="background-color:grey;">New game</button>
            <br>
            <br>
            <button id = "Overhead"; style="background-color:grey;">Overhead View</button>
            <br>
            <br>
            <label for = "Difficulty:" style="color:white"> Difficuly: </label>
            <select name = "Select" id = "difficulty"; style="background-color:grey;">
                <option value = "60"> Easy </option>
                <option value = "45" selected> Medium </option>
                <option value = "30"> Hard </option>
                <option value = "15"> Impossible </option>
            </select>
            <br>
            <br>
            <p style="color:white">---------------- &nbsp Score &nbsp -------------------</p>
            <p id="scores" style="color:white">Scores:</p>  
            <br>
            <p style="color:white">--------------- &nbsp Controls &nbsp -------------------</p>
            <p style="color:white">WASD for movement </p>
            <p style="color:white">SPACE to plant a mine </p>
            <!–- SPACE to use power-up from inventory -–>
            <p style="color:white">P to pause </p>
            <p style="color:white">&#8597 to increase/decrease camera's theta angle </p>
            <p style="color:white">&#8596 to increase/decrease camera's phi angle </p>


	</div>
    <img id = "floorImage" src = "Textures/floorImage.jpg" hidden></img> 
    <img id = "wallImage" src = "Textures/BrickWall.png" hidden><img>   
    <img id = "fireImage" src = "Textures/fireImage.jpg" hidden><img>   
    <img id = "token" src = "Textures/coinTexture.jpg" hidden><img> 
    <img id = "player" src = "Textures/armour.jpg" hidden><img> 
    <img id = "powerup" src = "Textures/powerUp.jpg" hidden><img> 
    <img id = "mine" src = "Textures/mine.jpg" hidden><img> 
</body>
</html>